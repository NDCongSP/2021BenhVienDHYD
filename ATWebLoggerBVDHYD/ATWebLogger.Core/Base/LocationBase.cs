// Created using LayerGen 3.5

using System;
using System.Data.SqlTypes;
using System.IO;
using System.Runtime.Serialization.Formatters.Binary;
using System.Collections.Generic;
using System.Data;
using MySql.Data.MySqlClient;
using MySql.Data.Types;

namespace CoreData
{
    [Serializable]
    public abstract partial class LocationBase
    {
        private string _dataType;
        private double? _deadband;
        private int _deviceId;
        private double _gain;
        private double? _highLevel;
        private int _id;
        private double? _lowLevel;
        private int _memoryAddress;
        private string _name;
        private double _offset;
        private string _state;


        // isDirty flag determines whether data has been changed.
        private bool _layerGenIsDirty;
        protected string _connectionString;
        // _layerGenIsUpdate flag determines whether we need to do an update or an insert when saving.
        protected bool _layerGenIsUpdate;
        // isReadOnly determines if the row is in a read only state. This happens when partial
        // fields are loaded.
        private bool _isReadOnly;
        // concurrencyArray holds a serialized version of a database row to make concurrency work.
        private byte[] _concurrencyArray;
        private readonly ATWebLogger.Core.Location.ConcurrencyOptions _concurrency;

        private readonly bool _layerGenUseStoredProcedures;
        protected static string LayerGenTableName { get { return Universal.LocationTableName; } }
        protected static string LayerGenTableNameDelimited { get { return $"`{Universal.LocationTableName}`"; } }
        private const string LayerGenFieldNames = "`DataType`,`Deadband`,`DeviceId`,`Gain`,`HighLevel`,`LowLevel`,`MemoryAddress`,`Name`,`Offset`,`State`";
        private const string LayerGenValueNames = "@val1,@val2,@val3,@val4,@val5,@val6,@val7,@val8,@val9,@val10";
        protected const string LayerGenPrimaryKey = "Id";

        // nullDictionary is a dictionary for keeping track of which fields are null values.
        private readonly Dictionary<ATWebLogger.Core.Location.Fields, bool> _nullDictionary;
        // internalNameDictionary is a dictionary for holding the names of the fields, as they are in SQL Server.
        private readonly Dictionary<ATWebLogger.Core.Location.Fields, string> _internalNameDictionary;
        private int _oldPrimaryKeyValue;

        [field: NonSerialized]
        public string Value { get; set; } = "";

        [field: NonSerialized]
        public string Status { get; set; } = "";

        public bool IsHighAlarm { get; set; } = false;
        public bool IsLowAlarm { get; set; } = false;
        public bool IsNormalAlarm { get; set; } = false;
        public int CountHighAlarm { get; set; } = 0;
        public int CountLowAlarm { get; set; } = 0;
        public int CountNormalAlarm { get; set; } = 0;

        //Cong update 11/01/2021. xử lý giá trị vọt lố. sau khi xử lý xong thì gán value==valueNew
        public double ValueOld { get; set; } = 0;
        //public double ValueNew { get; set; } = 0;
        public double OverValue { get; set; } = 10;

        public virtual int Id
        {
            get { return _id; }
            set { _id = value; _layerGenIsDirty = true; }
        }

        public virtual string DataType
        {
            get { return _dataType; }
            set { _dataType = value; _layerGenIsDirty = true; if (value == null) SetNull(ATWebLogger.Core.Location.Fields.DataType); else UnsetNull(ATWebLogger.Core.Location.Fields.DataType); }
        }

        public virtual double? Deadband
        {
            get { return _deadband; }
            set { _deadband = value; _layerGenIsDirty = true; UnsetNull(ATWebLogger.Core.Location.Fields.Deadband); }
        }

        public virtual int DeviceId
        {
            get { return _deviceId; }
            set { _deviceId = value; _layerGenIsDirty = true; UnsetNull(ATWebLogger.Core.Location.Fields.DeviceId); }
        }

        public virtual double Gain
        {
            get { return _gain; }
            set { _gain = value; _layerGenIsDirty = true; UnsetNull(ATWebLogger.Core.Location.Fields.Gain); }
        }

        public virtual double? HighLevel
        {
            get { return _highLevel; }
            set { _highLevel = value; _layerGenIsDirty = true; UnsetNull(ATWebLogger.Core.Location.Fields.HighLevel); }
        }

        public virtual double? LowLevel
        {
            get { return _lowLevel; }
            set { _lowLevel = value; _layerGenIsDirty = true; UnsetNull(ATWebLogger.Core.Location.Fields.LowLevel); }
        }

        public virtual int MemoryAddress
        {
            get { return _memoryAddress; }
            set { _memoryAddress = value; _layerGenIsDirty = true; UnsetNull(ATWebLogger.Core.Location.Fields.MemoryAddress); }
        }

        public virtual string Name
        {
            get { return _name; }
            set { _name = value; _layerGenIsDirty = true; if (value == null) SetNull(ATWebLogger.Core.Location.Fields.Name); else UnsetNull(ATWebLogger.Core.Location.Fields.Name); }
        }

        public virtual double Offset
        {
            get { return _offset; }
            set { _offset = value; _layerGenIsDirty = true; UnsetNull(ATWebLogger.Core.Location.Fields.Offset); }
        }

        public virtual string State
        {
            get { return _state; }
            set { _state = value; _layerGenIsDirty = true; if (value == null) SetNull(ATWebLogger.Core.Location.Fields.State); else UnsetNull(ATWebLogger.Core.Location.Fields.State); }
        }



        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class.
        /// </summary>
        protected LocationBase()
        {
            // By default, use Sql text instead of stored procedures.
            _layerGenUseStoredProcedures = false;
            // By default, set concurrency to Ignore.
            _concurrency = ATWebLogger.Core.Location.ConcurrencyOptions.Ignore;
            // Since no row was loaded, this will be an insert and not an update.
            _layerGenIsUpdate = false;
            // Since no data was modified yet, set the dirty flag to false.
            _layerGenIsDirty = false;
            // Since all fields were loaded, this is not read only.
            _isReadOnly = false;
            // Set the connection string.
            _connectionString = Universal.GetConnectionString();
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            // Store the value of the primary key.
            _oldPrimaryKeyValue = _id;
        }

        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class.
        /// </summary>
        /// <param name="connectionString">Sets the connection string to use to connect to the database.</param>
        protected LocationBase(ATWebLogger.Core.LayerGenConnectionString connectionString)
        {
            // By default, use Sql text instead of stored procedures.
            _layerGenUseStoredProcedures = false;
            // By default, set concurrency to Ignore.
            _concurrency = ATWebLogger.Core.Location.ConcurrencyOptions.Ignore;
            // Since no row was loaded, this will be an insert and not an update.
            _layerGenIsUpdate = false;
            // Since no data was modified yet, set the dirty flag to false.
            _layerGenIsDirty = false;
            // Since all fields were loaded, this is not read only.
            _isReadOnly = false;
            // Set the connection string.
            _connectionString = connectionString.ConnectionString;
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            // Store the value of the primary key.
            _oldPrimaryKeyValue = _id;
        }

        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, specifying
        /// if you want to use stored procedures or Sql text commands for data access.
        /// </summary>
        /// <param name="useStoredProcedures">If true, then all data access will be done using stored procedures. Otherwise, data access will be done using Sql text</param>
        protected LocationBase(bool useStoredProcedures)
        {
            _layerGenUseStoredProcedures = useStoredProcedures;
            // By default, set concurrency to Ignore.
            _concurrency = ATWebLogger.Core.Location.ConcurrencyOptions.Ignore;
            // Since no row was loaded, this will be an insert and not an update.
            _layerGenIsUpdate = false;
            // Since no data was modified yet, set the dirty flag to false.
            _layerGenIsDirty = false;
            // Since all fields were loaded, this is not read only.
            _isReadOnly = false;
            // Set the connection string.
            _connectionString = Universal.GetConnectionString();
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            // Store the value of the primary key.
            _oldPrimaryKeyValue = _id;
        }

        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, specifying
        /// if you want to use stored procedures or Sql text commands for data access.
        /// </summary>
        /// <param name="connectionString">Sets the connection string to use to connect to the database.</param>
        /// <param name="useStoredProcedures">If true, then all data access will be done using stored procedures. Otherwise, data access will be done using Sql text</param>
        protected LocationBase(ATWebLogger.Core.LayerGenConnectionString connectionString, bool useStoredProcedures)
        {
            _layerGenUseStoredProcedures = useStoredProcedures;
            // By default, set concurrency to Ignore.
            _concurrency = ATWebLogger.Core.Location.ConcurrencyOptions.Ignore;
            // Since no row was loaded, this will be an insert and not an update.
            _layerGenIsUpdate = false;
            // Since no data was modified yet, set the dirty flag to false.
            _layerGenIsDirty = false;
            // Since all fields were loaded, this is not read only.
            _isReadOnly = false;
            // Set the connection string.
            _connectionString = connectionString.ConnectionString;
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            // Store the value of the primary key.
            _oldPrimaryKeyValue = _id;
        }


        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, loading a
        /// row from the database that matches the given primary key.
        /// </summary>
        /// <param name="id">The primary key of the row that gets loaded from the database.</param>
        protected LocationBase(int id)
        {
            // By default, use Sql text instead of stored procedures.
            _layerGenUseStoredProcedures = false;
            // By default, set concurrency to Ignore.
            _concurrency = ATWebLogger.Core.Location.ConcurrencyOptions.Ignore;
            // Since a row will be loaded, this will be an update and not an insert.
            _layerGenIsUpdate = true;
            // Since no data was modified yet, set the dirty flag to false.
            _layerGenIsDirty = false;
            // Since all fields were loaded, this is not read only.
            _isReadOnly = false;
            // Set the connection string.
            _connectionString = Universal.GetConnectionString();
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            // Load the row matching the given primary key.
            Get(id);
            // Store the value of the primary key.
            _oldPrimaryKeyValue = _id;
        }


        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, loading a
        /// row from the database that matches the given primary key.
        /// </summary>
        /// <param name="connectionString">Sets the connection string to use to connect to the database.</param>
        /// <param name="id">The primary key of the row that gets loaded from the database.</param>
        protected LocationBase(ATWebLogger.Core.LayerGenConnectionString connectionString, int id)
        {
            // By default, use Sql text instead of stored procedures.
            _layerGenUseStoredProcedures = false;
            // By default, set concurrency to Ignore.
            _concurrency = ATWebLogger.Core.Location.ConcurrencyOptions.Ignore;
            // Since a row will be loaded, this will be an update and not an insert.
            _layerGenIsUpdate = true;
            // Since no data was modified yet, set the dirty flag to false.
            _layerGenIsDirty = false;
            // Since all fields were loaded, this is not read only.
            _isReadOnly = false;
            // Set the connection string.
            _connectionString = connectionString.ConnectionString;
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            // Load the row matching the given primary key.
            Get(id);
            // Store the value of the primary key.
            _oldPrimaryKeyValue = _id;
        }


        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, loading a
        /// row from the database that matches the given primary key. You can specify
        /// if you want to do all data access using stored procedures or Sql text.
        /// </summary>
        /// <param name="id">The primary key of the row that gets loaded from the database.</param>
        /// <param name="useStoredProcedures">If true, then all data access will be done using stored procedures. Otherwise, data access will be done using Sql text</param>
        protected LocationBase(int id, bool useStoredProcedures)
        {
            _layerGenUseStoredProcedures = useStoredProcedures;
            // By default, set concurrency to Ignore.
            _concurrency = ATWebLogger.Core.Location.ConcurrencyOptions.Ignore;
            // Since a row will be loaded, this will be an update and not an insert.
            _layerGenIsUpdate = true;
            // Since no data was modified yet, set the dirty flag to false.
            _layerGenIsDirty = false;
            // Since all fields were loaded, this is not read only.
            _isReadOnly = false;
            // Set the connection string.
            _connectionString = Universal.GetConnectionString();
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            // Load the row matching the given primary key.
            Get(id);
            // Store the value of the primary key.
            _oldPrimaryKeyValue = _id;
        }


        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, loading a
        /// row from the database that matches the given primary key. You can specify
        /// if you want to do all data access using stored procedures or Sql text.
        /// </summary>
        /// <param name="connectionString">Sets the connection string to use to connect to the database.</param>
        /// <param name="id">The primary key of the row that gets loaded from the database.</param>
        /// <param name="useStoredProcedures">If true, then all data access will be done using stored procedures. Otherwise, data access will be done using Sql text</param>
        protected LocationBase(ATWebLogger.Core.LayerGenConnectionString connectionString, int id, bool useStoredProcedures)
        {
            _layerGenUseStoredProcedures = useStoredProcedures;
            // By default, set concurrency to Ignore.
            _concurrency = ATWebLogger.Core.Location.ConcurrencyOptions.Ignore;
            // Since a row will be loaded, this will be an update and not an insert.
            _layerGenIsUpdate = true;
            // Since no data was modified yet, set the dirty flag to false.
            _layerGenIsDirty = false;
            // Since all fields were loaded, this is not read only.
            _isReadOnly = false;
            // Set the connection string.
            _connectionString = connectionString.ConnectionString;
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            // Load the row matching the given primary key.
            Get(id);
            // Store the value of the primary key.
            _oldPrimaryKeyValue = _id;
        }


        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, loading a
        /// row from the database that matches the given primary key and loading
        /// only the fields specified.
        /// </summary>
        /// <param name="id">The primary key of the row that gets loaded from the database.</param>
        /// <param name="fields">The list of <see cref="ATWebLogger.Core.Location.Fields"/> to pull from the database.</param>
        protected LocationBase(int id, List<ATWebLogger.Core.Location.Fields> fields)
        {
            // By default, use Sql text instead of stored procedures.
            _layerGenUseStoredProcedures = false;
            // By default, set concurrency to Ignore.
            _concurrency = ATWebLogger.Core.Location.ConcurrencyOptions.Ignore;
            // Since a row will be loaded, this will be an update and not an insert.
            _layerGenIsUpdate = true;
            // Since no data was modified yet, set the dirty flag to false.
            _layerGenIsDirty = false;
            // Since this is a partial load, set read only to true.
            _isReadOnly = fields != null && fields.Count != 0;
            // Set the connection string.
            _connectionString = Universal.GetConnectionString();
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            // Load the row matching the given primary key.
            Get(id, fields);
            // Store the value of the primary key.
            _oldPrimaryKeyValue = _id;
        }


        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, loading a
        /// row from the database that matches the given primary key and loading
        /// only the fields specified.
        /// </summary>
        /// <param name="connectionString">Sets the connection string to use to connect to the database.</param>
        /// <param name="id">The primary key of the row that gets loaded from the database.</param>
        /// <param name="fields">The list of <see cref="ATWebLogger.Core.Location.Fields"/> to pull from the database.</param>
        protected LocationBase(ATWebLogger.Core.LayerGenConnectionString connectionString, int id, List<ATWebLogger.Core.Location.Fields> fields)
        {
            // By default, use Sql text instead of stored procedures.
            _layerGenUseStoredProcedures = false;
            // By default, set concurrency to Ignore.
            _concurrency = ATWebLogger.Core.Location.ConcurrencyOptions.Ignore;
            // Since a row will be loaded, this will be an update and not an insert.
            _layerGenIsUpdate = true;
            // Since no data was modified yet, set the dirty flag to false.
            _layerGenIsDirty = false;
            // Since this is a partial load, set read only to true.
            _isReadOnly = fields != null && fields.Count != 0;
            // Set the connection string.
            _connectionString = connectionString.ConnectionString;
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            // Load the row matching the given primary key.
            Get(id, fields);
            // Store the value of the primary key.
            _oldPrimaryKeyValue = _id;
        }


        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, loading a
        /// row from the database that matches the given primary key and loading
        /// only the fields specified.
        /// </summary>
        /// <param name="id">The primary key of the row that gets loaded from the database.</param>
        /// <param name="fields">The list of <see cref="ATWebLogger.Core.Location.Fields"/> to pull from the database.</param>
        /// <param name="useStoredProcedures">If true, then all data access will be done using stored procedures. Otherwise, data access will be done using Sql text</param>
        protected LocationBase(int id, List<ATWebLogger.Core.Location.Fields> fields, bool useStoredProcedures)
        {
            _layerGenUseStoredProcedures = useStoredProcedures;
            // By default, set concurrency to Ignore.
            _concurrency = ATWebLogger.Core.Location.ConcurrencyOptions.Ignore;
            // Since a row will be loaded, this will be an update and not an insert.
            _layerGenIsUpdate = true;
            // Since no data was modified yet, set the dirty flag to false.
            _layerGenIsDirty = false;
            // Since this is a partial load, set read only to true.
            _isReadOnly = fields != null && fields.Count != 0;
            // Set the connection string.
            _connectionString = Universal.GetConnectionString();
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            // Load the row matching the given primary key.
            Get(id, fields);
            // Store the value of the primary key.
            _oldPrimaryKeyValue = _id;
        }


        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, loading a
        /// row from the database that matches the given primary key and loading
        /// only the fields specified.
        /// </summary>
        /// <param name="connectionString">Sets the connection string to use to connect to the database.</param>
        /// <param name="id">The primary key of the row that gets loaded from the database.</param>
        /// <param name="fields">The list of <see cref="ATWebLogger.Core.Location.Fields"/> to pull from the database.</param>
        /// <param name="useStoredProcedures">If true, then all data access will be done using stored procedures. Otherwise, data access will be done using Sql text</param>
        protected LocationBase(ATWebLogger.Core.LayerGenConnectionString connectionString, int id, List<ATWebLogger.Core.Location.Fields> fields, bool useStoredProcedures)
        {
            _layerGenUseStoredProcedures = useStoredProcedures;
            // By default, set concurrency to Ignore.
            _concurrency = ATWebLogger.Core.Location.ConcurrencyOptions.Ignore;
            // Since a row will be loaded, this will be an update and not an insert.
            _layerGenIsUpdate = true;
            // Since no data was modified yet, set the dirty flag to false.
            _layerGenIsDirty = false;
            // Since this is a partial load, set read only to true.
            _isReadOnly = fields != null && fields.Count != 0;
            // Set the connection string.
            _connectionString = connectionString.ConnectionString;
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            // Load the row matching the given primary key.
            Get(id, fields);
            // Store the value of the primary key.
            _oldPrimaryKeyValue = _id;
        }

        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, loading a
        /// row from the given DataRow.
        /// </summary>
        /// <param name="dr">The DataRow that contains the data to be loaded into the instance.</param>
        protected LocationBase(DataRow dr)
        {
            // By default, use Sql text instead of stored procedures.
            _layerGenUseStoredProcedures = false;
            // By default, set concurrency to Ignore.
            _concurrency = ATWebLogger.Core.Location.ConcurrencyOptions.Ignore;
            // Since a row will be loaded, this will be an update and not an insert.
            _layerGenIsUpdate = true;
            // Since all fields were loaded, this is not read only.
            _isReadOnly = false;
            // Set the connection string.
            _connectionString = Universal.GetConnectionString();
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            Fill(dr);
            _layerGenIsDirty = false;
            _oldPrimaryKeyValue = _id;
        }

        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, loading a
        /// row from the given DataRow.
        /// </summary>
        /// <param name="connectionString">Sets the connection string to use to connect to the database.</param>
        /// <param name="dr">The DataRow that contains the data to be loaded into the instance.</param>
        protected LocationBase(ATWebLogger.Core.LayerGenConnectionString connectionString, DataRow dr)
        {
            // By default, use Sql text instead of stored procedures.
            _layerGenUseStoredProcedures = false;
            // By default, set concurrency to Ignore.
            _concurrency = ATWebLogger.Core.Location.ConcurrencyOptions.Ignore;
            // Since a row will be loaded, this will be an update and not an insert.
            _layerGenIsUpdate = true;
            // Since all fields were loaded, this is not read only.
            _isReadOnly = false;
            // Set the connection string.
            _connectionString = connectionString.ConnectionString;
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            Fill(dr);
            _layerGenIsDirty = false;
            _oldPrimaryKeyValue = _id;
        }

        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, loading a
        /// row from the given DataRow.
        /// </summary>
        /// <param name="dr">The DataRow that contains the data to be loaded into the instance.</param>
        /// <param name="useStoredProcedures">If true, then all data access will be done using stored procedures. Otherwise, data access will be done using Sql text</param>
        protected LocationBase(DataRow dr, bool useStoredProcedures)
        {
            _layerGenUseStoredProcedures = useStoredProcedures;
            // By default, set concurrency to Ignore.
            _concurrency = ATWebLogger.Core.Location.ConcurrencyOptions.Ignore;
            // Since a row will be loaded, this will be an update and not an insert.
            _layerGenIsUpdate = true;
            // Since all fields were loaded, this is not read only.
            _isReadOnly = false;
            // Set the connection string.
            _connectionString = Universal.GetConnectionString();
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            Fill(dr);
            _layerGenIsDirty = false;
            _oldPrimaryKeyValue = _id;
        }

        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, loading a
        /// row from the given DataRow.
        /// </summary>
        /// <param name="connectionString">Sets the connection string to use to connect to the database.</param>
        /// <param name="dr">The DataRow that contains the data to be loaded into the instance.</param>
        /// <param name="useStoredProcedures">If true, then all data access will be done using stored procedures. Otherwise, data access will be done using Sql text</param>
        protected LocationBase(ATWebLogger.Core.LayerGenConnectionString connectionString, DataRow dr, bool useStoredProcedures)
        {
            _layerGenUseStoredProcedures = useStoredProcedures;
            // By default, set concurrency to Ignore.
            _concurrency = ATWebLogger.Core.Location.ConcurrencyOptions.Ignore;
            // Since a row will be loaded, this will be an update and not an insert.
            _layerGenIsUpdate = true;
            // Since all fields were loaded, this is not read only.
            _isReadOnly = false;
            // Set the connection string.
            _connectionString = connectionString.ConnectionString;
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            Fill(dr);
            _layerGenIsDirty = false;
            _oldPrimaryKeyValue = _id;
        }

        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, explicitly enabling
        /// or disabling the concurrency option.
        /// </summary>
        /// <param name="concurrency">A <see cref="ATWebLogger.Core.Location.ConcurrencyOptions"/> value indication the level of concurrency.</param>
		protected LocationBase(ATWebLogger.Core.Location.ConcurrencyOptions concurrency)
        {
            // By default, use Sql text instead of stored procedures.
            _layerGenUseStoredProcedures = false;
            _concurrency = concurrency;
            _layerGenIsUpdate = false;
            _layerGenIsDirty = false;
            // Since all fields were loaded, this is not read only.
            _isReadOnly = false;
            // Set the connection string.
            _connectionString = Universal.GetConnectionString();
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            _oldPrimaryKeyValue = _id;
        }

        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, explicitly enabling
        /// or disabling the concurrency option.
        /// </summary>
        /// <param name="connectionString">Sets the connection string to use to connect to the database.</param>
        /// <param name="concurrency">A <see cref="ATWebLogger.Core.Location.ConcurrencyOptions"/> value indication the level of concurrency.</param>
		protected LocationBase(ATWebLogger.Core.LayerGenConnectionString connectionString, ATWebLogger.Core.Location.ConcurrencyOptions concurrency)
        {
            // By default, use Sql text instead of stored procedures.
            _layerGenUseStoredProcedures = false;
            _concurrency = concurrency;
            _layerGenIsUpdate = false;
            _layerGenIsDirty = false;
            // Since all fields were loaded, this is not read only.
            _isReadOnly = false;
            // Set the connection string.
            _connectionString = connectionString.ConnectionString;
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            _oldPrimaryKeyValue = _id;
        }

        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, explicitly enabling
        /// or disabling the concurrency option.
        /// </summary>
        /// <param name="concurrency">A <see cref="ATWebLogger.Core.Location.ConcurrencyOptions"/> value indication the level of concurrency.</param>
        /// <param name="useStoredProcedures">If true, then all data access will be done using stored procedures. Otherwise, data access will be done using Sql text</param>
		protected LocationBase(ATWebLogger.Core.Location.ConcurrencyOptions concurrency, bool useStoredProcedures)
        {
            _layerGenUseStoredProcedures = useStoredProcedures;
            _concurrency = concurrency;
            _layerGenIsUpdate = false;
            _layerGenIsDirty = false;
            // Since all fields were loaded, this is not read only.
            _isReadOnly = false;
            // Set the connection string.
            _connectionString = Universal.GetConnectionString();
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            _oldPrimaryKeyValue = _id;
        }

        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, explicitly enabling
        /// or disabling the concurrency option.
        /// </summary>
        /// <param name="connectionString">Sets the connection string to use to connect to the database.</param>
        /// <param name="concurrency">A <see cref="ATWebLogger.Core.Location.ConcurrencyOptions"/> value indication the level of concurrency.</param>
        /// <param name="useStoredProcedures">If true, then all data access will be done using stored procedures. Otherwise, data access will be done using Sql text</param>
		protected LocationBase(ATWebLogger.Core.LayerGenConnectionString connectionString, ATWebLogger.Core.Location.ConcurrencyOptions concurrency, bool useStoredProcedures)
        {
            _layerGenUseStoredProcedures = useStoredProcedures;
            _concurrency = concurrency;
            _layerGenIsUpdate = false;
            _layerGenIsDirty = false;
            // Since all fields were loaded, this is not read only.
            _isReadOnly = false;
            // Set the connection string.
            _connectionString = connectionString.ConnectionString;
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            _oldPrimaryKeyValue = _id;
        }


        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, loading a
        /// row from the database that matches the given primary key and explicitly
        /// enabling or disabling the concurrency option.
        /// </summary>
        /// <param name="id">The primary key of the row that gets loaded from the database.</param>
        /// <param name="concurrency">A <see cref="ATWebLogger.Core.Location.ConcurrencyOptions"/> value indication the level of concurrency.</param>
        protected LocationBase(int id, ATWebLogger.Core.Location.ConcurrencyOptions concurrency)
        {
            // By default, use Sql text instead of stored procedures.
            _layerGenUseStoredProcedures = false;
            _concurrency = concurrency;
            _layerGenIsUpdate = true;
            _layerGenIsDirty = false;
            // Since all fields were loaded, this is not read only.
            _isReadOnly = false;
            _connectionString = Universal.GetConnectionString();
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            Get(id);
            _oldPrimaryKeyValue = _id;
        }


        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, loading a
        /// row from the database that matches the given primary key and explicitly
        /// enabling or disabling the concurrency option.
        /// </summary>
        /// <param name="connectionString">Sets the connection string to use to connect to the database.</param>
        /// <param name="id">The primary key of the row that gets loaded from the database.</param>
        /// <param name="concurrency">A <see cref="ATWebLogger.Core.Location.ConcurrencyOptions"/> value indication the level of concurrency.</param>
        protected LocationBase(ATWebLogger.Core.LayerGenConnectionString connectionString, int id, ATWebLogger.Core.Location.ConcurrencyOptions concurrency)
        {
            // By default, use Sql text instead of stored procedures.
            _layerGenUseStoredProcedures = false;
            _concurrency = concurrency;
            _layerGenIsUpdate = true;
            _layerGenIsDirty = false;
            // Since all fields were loaded, this is not read only.
            _isReadOnly = false;
            _connectionString = connectionString.ConnectionString;
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            Get(id);
            _oldPrimaryKeyValue = _id;
        }


        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, loading a
        /// row from the database that matches the given primary key and explicitly
        /// enabling or disabling the concurrency option.
        /// </summary>
        /// <param name="id">The primary key of the row that gets loaded from the database.</param>
        /// <param name="concurrency">A <see cref="ATWebLogger.Core.Location.ConcurrencyOptions"/> value indication the level of concurrency.</param>
        /// <param name="useStoredProcedures">If true, then all data access will be done using stored procedures. Otherwise, data access will be done using Sql text</param>
        protected LocationBase(int id, ATWebLogger.Core.Location.ConcurrencyOptions concurrency, bool useStoredProcedures)
        {
            _layerGenUseStoredProcedures = useStoredProcedures;
            _concurrency = concurrency;
            _layerGenIsUpdate = true;
            _layerGenIsDirty = false;
            // Since all fields were loaded, this is not read only.
            _isReadOnly = false;
            _connectionString = Universal.GetConnectionString();
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            Get(id);
            _oldPrimaryKeyValue = _id;
        }


        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, loading a
        /// row from the database that matches the given primary key and explicitly
        /// enabling or disabling the concurrency option.
        /// </summary>
        /// <param name="connectionString">Sets the connection string to use to connect to the database.</param>
        /// <param name="id">The primary key of the row that gets loaded from the database.</param>
        /// <param name="concurrency">A <see cref="ATWebLogger.Core.Location.ConcurrencyOptions"/> value indication the level of concurrency.</param>
        /// <param name="useStoredProcedures">If true, then all data access will be done using stored procedures. Otherwise, data access will be done using Sql text</param>
        protected LocationBase(ATWebLogger.Core.LayerGenConnectionString connectionString, int id, ATWebLogger.Core.Location.ConcurrencyOptions concurrency, bool useStoredProcedures)
        {
            _layerGenUseStoredProcedures = useStoredProcedures;
            _concurrency = concurrency;
            _layerGenIsUpdate = true;
            _layerGenIsDirty = false;
            // Since all fields were loaded, this is not read only.
            _isReadOnly = false;
            _connectionString = connectionString.ConnectionString;
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            Get(id);
            _oldPrimaryKeyValue = _id;
        }


        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, loading a
        /// row from the database that matches the given primary key and loading
        /// only the fields specified and explicitly enabling or disabling the
        /// concurrency option.
        /// </summary>
        /// <param name="id">The primary key of the row that gets loaded from the database.</param>
        /// <param name="fields">The list of <see cref="ATWebLogger.Core.Location.Fields"/> to pull from the database.</param>
        /// <param name="concurrency">A <see cref="ATWebLogger.Core.Location.ConcurrencyOptions"/> value indication the level of concurrency.</param>
        protected LocationBase(int id, List<ATWebLogger.Core.Location.Fields> fields, ATWebLogger.Core.Location.ConcurrencyOptions concurrency)
        {
            // By default, use Sql text instead of stored procedures.
            _layerGenUseStoredProcedures = false;
            _concurrency = concurrency;
            _layerGenIsUpdate = true;
            _layerGenIsDirty = false;
            // Since this is a partial load, set read only to true.
            _isReadOnly = fields != null && fields.Count != 0;
            _connectionString = Universal.GetConnectionString();
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            Get(id, fields);
            _oldPrimaryKeyValue = _id;
        }

        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, loading a
        /// row from the database that matches the given primary key and loading
        /// only the fields specified and explicitly enabling or disabling the
        /// concurrency option.
        /// </summary>
        /// <param name="connectionString">Sets the connection string to use to connect to the database.</param>
        /// <param name="id">The primary key of the row that gets loaded from the database.</param>
        /// <param name="fields">The list of <see cref="ATWebLogger.Core.Location.Fields"/> to pull from the database.</param>
        /// <param name="concurrency">A <see cref="ATWebLogger.Core.Location.ConcurrencyOptions"/> value indication the level of concurrency.</param>
        protected LocationBase(ATWebLogger.Core.LayerGenConnectionString connectionString, int id, List<ATWebLogger.Core.Location.Fields> fields, ATWebLogger.Core.Location.ConcurrencyOptions concurrency)
        {
            // By default, use Sql text instead of stored procedures.
            _layerGenUseStoredProcedures = false;
            _concurrency = concurrency;
            _layerGenIsUpdate = true;
            _layerGenIsDirty = false;
            // Since this is a partial load, set read only to true.
            _isReadOnly = fields != null && fields.Count != 0;
            _connectionString = connectionString.ConnectionString;
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            Get(id, fields);
            _oldPrimaryKeyValue = _id;
        }


        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, loading a
        /// row from the database that matches the given primary key and loading
        /// only the fields specified and explicitly enabling or disabling the
        /// concurrency option.
        /// </summary>
        /// <param name="id">The primary key of the row that gets loaded from the database.</param>
        /// <param name="fields">The list of <see cref="ATWebLogger.Core.Location.Fields"/> to pull from the database.</param>
        /// <param name="concurrency">A <see cref="ATWebLogger.Core.Location.ConcurrencyOptions"/> value indication the level of concurrency.</param>
        /// <param name="useStoredProcedures">If true, then all data access will be done using stored procedures. Otherwise, data access will be done using Sql text</param>
        protected LocationBase(int id, List<ATWebLogger.Core.Location.Fields> fields, ATWebLogger.Core.Location.ConcurrencyOptions concurrency, bool useStoredProcedures)
        {
            _layerGenUseStoredProcedures = useStoredProcedures;
            _concurrency = concurrency;
            _layerGenIsUpdate = true;
            _layerGenIsDirty = false;
            // Since this is a partial load, set read only to true.
            _isReadOnly = fields != null && fields.Count != 0;
            _connectionString = Universal.GetConnectionString();
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            Get(id, fields);
            _oldPrimaryKeyValue = _id;
        }

        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, loading a
        /// row from the database that matches the given primary key and loading
        /// only the fields specified and explicitly enabling or disabling the
        /// concurrency option.
        /// </summary>
        /// <param name="connectionString">Sets the connection string to use to connect to the database.</param>
        /// <param name="id">The primary key of the row that gets loaded from the database.</param>
        /// <param name="fields">The list of <see cref="ATWebLogger.Core.Location.Fields"/> to pull from the database.</param>
        /// <param name="concurrency">A <see cref="ATWebLogger.Core.Location.ConcurrencyOptions"/> value indication the level of concurrency.</param>
        /// <param name="useStoredProcedures">If true, then all data access will be done using stored procedures. Otherwise, data access will be done using Sql text</param>
        protected LocationBase(ATWebLogger.Core.LayerGenConnectionString connectionString, int id, List<ATWebLogger.Core.Location.Fields> fields, ATWebLogger.Core.Location.ConcurrencyOptions concurrency, bool useStoredProcedures)
        {
            _layerGenUseStoredProcedures = useStoredProcedures;
            _concurrency = concurrency;
            _layerGenIsUpdate = true;
            _layerGenIsDirty = false;
            // Since this is a partial load, set read only to true.
            _isReadOnly = fields != null && fields.Count != 0;
            _connectionString = connectionString.ConnectionString;
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            Get(id, fields);
            _oldPrimaryKeyValue = _id;
        }


        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, loading a
        /// row from the given DataRow and explicitly enabling or disabling the
        /// concurrency option.
        /// </summary>
        /// <param name="dr">The DataRow that contains the data to be loaded into the instance.</param>
        /// <param name="concurrency">A <see cref="ATWebLogger.Core.Location.ConcurrencyOptions"/> value indicating the level of concurrency.</param>
        protected LocationBase(DataRow dr, ATWebLogger.Core.Location.ConcurrencyOptions concurrency)
        {
            // By default, use Sql text instead of stored procedures.
            _layerGenUseStoredProcedures = false;
            _concurrency = concurrency;
            _layerGenIsUpdate = true;
            _isReadOnly = false;
            // Since all fields were loaded, this is not read only.
            _connectionString = Universal.GetConnectionString();
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            Fill(dr);
            _layerGenIsDirty = false;
            _oldPrimaryKeyValue = _id;
        }


        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, loading a
        /// row from the given DataRow and explicitly enabling or disabling the
        /// concurrency option.
        /// </summary>
        /// <param name="connectionString">Sets the connection string to use to connect to the database.</param>
        /// <param name="dr">The DataRow that contains the data to be loaded into the instance.</param>
        /// <param name="concurrency">A <see cref="ATWebLogger.Core.Location.ConcurrencyOptions"/> value indicating the level of concurrency.</param>
        protected LocationBase(ATWebLogger.Core.LayerGenConnectionString connectionString, DataRow dr, ATWebLogger.Core.Location.ConcurrencyOptions concurrency)
        {
            // By default, use Sql text instead of stored procedures.
            _layerGenUseStoredProcedures = false;
            _concurrency = concurrency;
            _layerGenIsUpdate = true;
            _isReadOnly = false;
            // Since all fields were loaded, this is not read only.
            _connectionString = connectionString.ConnectionString;
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            Fill(dr);
            _layerGenIsDirty = false;
            _oldPrimaryKeyValue = _id;
        }


        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, loading a
        /// row from the given DataRow and explicitly enabling or disabling the
        /// concurrency option.
        /// </summary>
        /// <param name="dr">The DataRow that contains the data to be loaded into the instance.</param>
        /// <param name="concurrency">A <see cref="ATWebLogger.Core.Location.ConcurrencyOptions"/> value indicating the level of concurrency.</param>
        /// <param name="useStoredProcedures">If true, then all data access will be done using stored procedures. Otherwise, data access will be done using Sql text</param>
        protected LocationBase(DataRow dr, ATWebLogger.Core.Location.ConcurrencyOptions concurrency, bool useStoredProcedures)
        {
            _layerGenUseStoredProcedures = useStoredProcedures;
            _concurrency = concurrency;
            _layerGenIsUpdate = true;
            _isReadOnly = false;
            // Since all fields were loaded, this is not read only.
            _connectionString = Universal.GetConnectionString();
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            Fill(dr);
            _layerGenIsDirty = false;
            _oldPrimaryKeyValue = _id;
        }


        /// <summary>
        /// Initializes a new instance of the <see cref="LocationBase"/> class, loading a
        /// row from the given DataRow and explicitly enabling or disabling the
        /// concurrency option.
        /// </summary>
        /// <param name="connectionString">Sets the connection string to use to connect to the database.</param>
        /// <param name="dr">The DataRow that contains the data to be loaded into the instance.</param>
        /// <param name="concurrency">A <see cref="ATWebLogger.Core.Location.ConcurrencyOptions"/> value indicating the level of concurrency.</param>
        /// <param name="useStoredProcedures">If true, then all data access will be done using stored procedures. Otherwise, data access will be done using Sql text</param>
        protected LocationBase(ATWebLogger.Core.LayerGenConnectionString connectionString, DataRow dr, ATWebLogger.Core.Location.ConcurrencyOptions concurrency, bool useStoredProcedures)
        {
            _layerGenUseStoredProcedures = useStoredProcedures;
            _concurrency = concurrency;
            _layerGenIsUpdate = true;
            _isReadOnly = false;
            // Since all fields were loaded, this is not read only.
            _connectionString = connectionString.ConnectionString;
            _nullDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, bool>();
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Id, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Name, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, true);
            _nullDictionary.Add(ATWebLogger.Core.Location.Fields.State, true);

            _internalNameDictionary = new Dictionary<ATWebLogger.Core.Location.Fields, string>();
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DataType, "DataType");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Deadband, "Deadband");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.DeviceId, "DeviceId");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Gain, "Gain");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.HighLevel, "HighLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Id, "Id");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.LowLevel, "LowLevel");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.MemoryAddress, "MemoryAddress");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Name, "Name");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.Offset, "Offset");
            _internalNameDictionary.Add(ATWebLogger.Core.Location.Fields.State, "State");

            Fill(dr);
            _layerGenIsDirty = false;
            _oldPrimaryKeyValue = _id;
        }

        /// <summary>
        /// Reads a DataRow and populates the properties from the DataRow.
        /// </summary>
        /// <param name="dr">The DataRow that contains the data to be loaded into the properties.</param>
        protected void Fill(DataRow dr)
        {
            if (HasField(_internalNameDictionary[ATWebLogger.Core.Location.Fields.DataType], dr))
            {
                if (dr[_internalNameDictionary[ATWebLogger.Core.Location.Fields.DataType]] == DBNull.Value)
                {
                    SetNull(ATWebLogger.Core.Location.Fields.DataType);
                }
                else
                {
                    DataType = (string)dr[_internalNameDictionary[ATWebLogger.Core.Location.Fields.DataType]];
                    DataType = DataType.TrimEnd();
                    UnsetNull(ATWebLogger.Core.Location.Fields.DataType);
                }
            }
            else
            {
                _isReadOnly = true;
                SetNull(ATWebLogger.Core.Location.Fields.DataType);
            }

            if (HasField(_internalNameDictionary[ATWebLogger.Core.Location.Fields.Deadband], dr))
            {
                if (dr[_internalNameDictionary[ATWebLogger.Core.Location.Fields.Deadband]] == DBNull.Value)
                {
                    SetNull(ATWebLogger.Core.Location.Fields.Deadband);
                }
                else
                {
                    Deadband = (double)dr[_internalNameDictionary[ATWebLogger.Core.Location.Fields.Deadband]];
                    UnsetNull(ATWebLogger.Core.Location.Fields.Deadband);
                }
            }
            else
            {
                _isReadOnly = true;
                SetNull(ATWebLogger.Core.Location.Fields.Deadband);
            }

            if (HasField(_internalNameDictionary[ATWebLogger.Core.Location.Fields.DeviceId], dr))
            {
                if (dr[_internalNameDictionary[ATWebLogger.Core.Location.Fields.DeviceId]] == DBNull.Value)
                {
                    SetNull(ATWebLogger.Core.Location.Fields.DeviceId);
                }
                else
                {
                    DeviceId = (int)dr[_internalNameDictionary[ATWebLogger.Core.Location.Fields.DeviceId]];
                    UnsetNull(ATWebLogger.Core.Location.Fields.DeviceId);
                }
            }
            else
            {
                _isReadOnly = true;
                SetNull(ATWebLogger.Core.Location.Fields.DeviceId);
            }

            if (HasField(_internalNameDictionary[ATWebLogger.Core.Location.Fields.Gain], dr))
            {
                if (dr[_internalNameDictionary[ATWebLogger.Core.Location.Fields.Gain]] == DBNull.Value)
                {
                    SetNull(ATWebLogger.Core.Location.Fields.Gain);
                }
                else
                {
                    Gain = (double)dr[_internalNameDictionary[ATWebLogger.Core.Location.Fields.Gain]];
                    UnsetNull(ATWebLogger.Core.Location.Fields.Gain);
                }
            }
            else
            {
                _isReadOnly = true;
                SetNull(ATWebLogger.Core.Location.Fields.Gain);
            }

            if (HasField(_internalNameDictionary[ATWebLogger.Core.Location.Fields.HighLevel], dr))
            {
                if (dr[_internalNameDictionary[ATWebLogger.Core.Location.Fields.HighLevel]] == DBNull.Value)
                {
                    SetNull(ATWebLogger.Core.Location.Fields.HighLevel);
                }
                else
                {
                    HighLevel = (double)dr[_internalNameDictionary[ATWebLogger.Core.Location.Fields.HighLevel]];
                    UnsetNull(ATWebLogger.Core.Location.Fields.HighLevel);
                }
            }
            else
            {
                _isReadOnly = true;
                SetNull(ATWebLogger.Core.Location.Fields.HighLevel);
            }

            if (HasField(_internalNameDictionary[ATWebLogger.Core.Location.Fields.Id], dr))
            {
                if (dr[_internalNameDictionary[ATWebLogger.Core.Location.Fields.Id]] == DBNull.Value)
                {
                    SetNull(ATWebLogger.Core.Location.Fields.Id);
                }
                else
                {
                    Id = (int)dr[_internalNameDictionary[ATWebLogger.Core.Location.Fields.Id]];
                    UnsetNull(ATWebLogger.Core.Location.Fields.Id);
                }
            }
            else
            {
                _isReadOnly = true;
                SetNull(ATWebLogger.Core.Location.Fields.Id);
            }

            if (HasField(_internalNameDictionary[ATWebLogger.Core.Location.Fields.LowLevel], dr))
            {
                if (dr[_internalNameDictionary[ATWebLogger.Core.Location.Fields.LowLevel]] == DBNull.Value)
                {
                    SetNull(ATWebLogger.Core.Location.Fields.LowLevel);
                }
                else
                {
                    LowLevel = (double)dr[_internalNameDictionary[ATWebLogger.Core.Location.Fields.LowLevel]];
                    UnsetNull(ATWebLogger.Core.Location.Fields.LowLevel);
                }
            }
            else
            {
                _isReadOnly = true;
                SetNull(ATWebLogger.Core.Location.Fields.LowLevel);
            }

            if (HasField(_internalNameDictionary[ATWebLogger.Core.Location.Fields.MemoryAddress], dr))
            {
                if (dr[_internalNameDictionary[ATWebLogger.Core.Location.Fields.MemoryAddress]] == DBNull.Value)
                {
                    SetNull(ATWebLogger.Core.Location.Fields.MemoryAddress);
                }
                else
                {
                    MemoryAddress = (int)dr[_internalNameDictionary[ATWebLogger.Core.Location.Fields.MemoryAddress]];
                    UnsetNull(ATWebLogger.Core.Location.Fields.MemoryAddress);
                }
            }
            else
            {
                _isReadOnly = true;
                SetNull(ATWebLogger.Core.Location.Fields.MemoryAddress);
            }

            if (HasField(_internalNameDictionary[ATWebLogger.Core.Location.Fields.Name], dr))
            {
                if (dr[_internalNameDictionary[ATWebLogger.Core.Location.Fields.Name]] == DBNull.Value)
                {
                    SetNull(ATWebLogger.Core.Location.Fields.Name);
                }
                else
                {
                    Name = (string)dr[_internalNameDictionary[ATWebLogger.Core.Location.Fields.Name]];
                    Name = Name.TrimEnd();
                    UnsetNull(ATWebLogger.Core.Location.Fields.Name);
                }
            }
            else
            {
                _isReadOnly = true;
                SetNull(ATWebLogger.Core.Location.Fields.Name);
            }

            if (HasField(_internalNameDictionary[ATWebLogger.Core.Location.Fields.Offset], dr))
            {
                if (dr[_internalNameDictionary[ATWebLogger.Core.Location.Fields.Offset]] == DBNull.Value)
                {
                    SetNull(ATWebLogger.Core.Location.Fields.Offset);
                }
                else
                {
                    Offset = (double)dr[_internalNameDictionary[ATWebLogger.Core.Location.Fields.Offset]];
                    UnsetNull(ATWebLogger.Core.Location.Fields.Offset);
                }
            }
            else
            {
                _isReadOnly = true;
                SetNull(ATWebLogger.Core.Location.Fields.Offset);
            }

            if (HasField(_internalNameDictionary[ATWebLogger.Core.Location.Fields.State], dr))
            {
                if (dr[_internalNameDictionary[ATWebLogger.Core.Location.Fields.State]] == DBNull.Value)
                {
                    SetNull(ATWebLogger.Core.Location.Fields.State);
                }
                else
                {
                    State = (string)dr[_internalNameDictionary[ATWebLogger.Core.Location.Fields.State]];
                    State = State.TrimEnd();
                    UnsetNull(ATWebLogger.Core.Location.Fields.State);
                }
            }
            else
            {
                _isReadOnly = true;
                SetNull(ATWebLogger.Core.Location.Fields.State);
            }


            if (_concurrency != ATWebLogger.Core.Location.ConcurrencyOptions.Ignore)
            {
                _concurrencyArray = GetSerializedObject(this);
            }
        }

        /// <summary>
        /// Determines if the given field exists in the SqlDataReader.
        /// </summary>
        /// <param name="fieldName">The name of the field to search for.</param>
        /// <param name="reader">The SqlDataReader to search in.</param>
        /// <returns>Returns true if the field exists in the SqlDataReader, otherwise, returns false.</returns>
        protected bool HasField(string fieldName, MySqlDataReader reader)
        {
            for (int i = 0; i < reader.FieldCount; i++)
            {
                if (reader.GetName(i) == fieldName)
                    return true;
            }

            return false;
        }

        /// <summary>
        /// Determines if the given field exists in the DataRow.
        /// </summary>
        /// <param name="fieldName">The name of the field to search for.</param>
        /// <param name="row">The DataRow to search in.</param>
        /// <returns>Returns true if the field exists in the DataRow, otherwise, returns false.</returns>
        protected bool HasField(string fieldName, DataRow row)
        {
            return row.Table.Columns.Contains(fieldName);
        }

        /// <summary>
        /// Retrieves the specified fields from the row with the matching
        /// primary key from the database and stores them in the properties.
        /// </summary>
        /// <param name="id">The primary key of the row to pull.</param>
        /// <param name="fields">The fields to pull from the database.</param>
        protected void Get(int id, List<ATWebLogger.Core.Location.Fields> fields)
        {
            string strFields = "`" + LayerGenPrimaryKey + "`,";

            // If there are no fields, then pull all fields
            if (fields == null || fields.Count == 0)
            {
                strFields = "*";
            }
            else
            {
                foreach (ATWebLogger.Core.Location.Fields field in fields)
                {
                    strFields = strFields + "`" + _internalNameDictionary[field] + "`,";
                }
                strFields = strFields.TrimEnd(',');
            }

            string sql = "SELECT " + strFields + " FROM `" + LayerGenTableName + "` WHERE " + LayerGenPrimaryKey + "=" + id;


            using (MySqlConnection connection = new MySqlConnection(_connectionString))
            {
                using (MySqlCommand command = new MySqlCommand())
                {
                    connection.Open();
                    command.CommandType = _layerGenUseStoredProcedures ? CommandType.StoredProcedure : CommandType.Text;
                    command.CommandText = _layerGenUseStoredProcedures ? ("spLocation_Select").Replace("@", "") : sql;
                    command.Connection = connection;
                    if (_layerGenUseStoredProcedures)
                    {
                        command.Parameters.AddWithValue("@id", id);
                        command.Parameters.AddWithValue("@fields", strFields);
                    }
                    else
                    {

                    }

                    using (MySqlDataReader reader = command.ExecuteReader())
                    {
                        if (!reader.HasRows)
                            throw new ATWebLogger.Core.RowNotFoundException(LayerGenTableName + ": Could not find row with id of " + id);

                        while (reader.Read())
                        {
                            Id = (int)reader["Id"];
                            UnsetNull(ATWebLogger.Core.Location.Fields.Id);
                            if ((!HasField("DataType", reader)) || reader.IsDBNull(reader.GetOrdinal("DataType")))
                            {
                                SetNull(ATWebLogger.Core.Location.Fields.DataType);
                            }
                            else
                            {
                                DataType = (string)reader["DataType"];
                                DataType = DataType.TrimEnd();
                                UnsetNull(ATWebLogger.Core.Location.Fields.DataType);
                            }
                            if ((!HasField("Deadband", reader)) || reader.IsDBNull(reader.GetOrdinal("Deadband")))
                            {
                                SetNull(ATWebLogger.Core.Location.Fields.Deadband);
                            }
                            else
                            {
                                Deadband = (double)reader["Deadband"];
                                UnsetNull(ATWebLogger.Core.Location.Fields.Deadband);
                            }
                            if ((!HasField("DeviceId", reader)) || reader.IsDBNull(reader.GetOrdinal("DeviceId")))
                            {
                                SetNull(ATWebLogger.Core.Location.Fields.DeviceId);
                            }
                            else
                            {
                                DeviceId = (int)reader["DeviceId"];
                                UnsetNull(ATWebLogger.Core.Location.Fields.DeviceId);
                            }
                            if ((!HasField("Gain", reader)) || reader.IsDBNull(reader.GetOrdinal("Gain")))
                            {
                                SetNull(ATWebLogger.Core.Location.Fields.Gain);
                            }
                            else
                            {
                                Gain = (double)reader["Gain"];
                                UnsetNull(ATWebLogger.Core.Location.Fields.Gain);
                            }
                            if ((!HasField("HighLevel", reader)) || reader.IsDBNull(reader.GetOrdinal("HighLevel")))
                            {
                                SetNull(ATWebLogger.Core.Location.Fields.HighLevel);
                            }
                            else
                            {
                                HighLevel = (double)reader["HighLevel"];
                                UnsetNull(ATWebLogger.Core.Location.Fields.HighLevel);
                            }
                            if ((!HasField("LowLevel", reader)) || reader.IsDBNull(reader.GetOrdinal("LowLevel")))
                            {
                                SetNull(ATWebLogger.Core.Location.Fields.LowLevel);
                            }
                            else
                            {
                                LowLevel = (double)reader["LowLevel"];
                                UnsetNull(ATWebLogger.Core.Location.Fields.LowLevel);
                            }
                            if ((!HasField("MemoryAddress", reader)) || reader.IsDBNull(reader.GetOrdinal("MemoryAddress")))
                            {
                                SetNull(ATWebLogger.Core.Location.Fields.MemoryAddress);
                            }
                            else
                            {
                                MemoryAddress = (int)reader["MemoryAddress"];
                                UnsetNull(ATWebLogger.Core.Location.Fields.MemoryAddress);
                            }
                            if ((!HasField("Name", reader)) || reader.IsDBNull(reader.GetOrdinal("Name")))
                            {
                                SetNull(ATWebLogger.Core.Location.Fields.Name);
                            }
                            else
                            {
                                Name = (string)reader["Name"];
                                Name = Name.TrimEnd();
                                UnsetNull(ATWebLogger.Core.Location.Fields.Name);
                            }
                            if ((!HasField("Offset", reader)) || reader.IsDBNull(reader.GetOrdinal("Offset")))
                            {
                                SetNull(ATWebLogger.Core.Location.Fields.Offset);
                            }
                            else
                            {
                                Offset = (double)reader["Offset"];
                                UnsetNull(ATWebLogger.Core.Location.Fields.Offset);
                            }
                            if ((!HasField("State", reader)) || reader.IsDBNull(reader.GetOrdinal("State")))
                            {
                                SetNull(ATWebLogger.Core.Location.Fields.State);
                            }
                            else
                            {
                                State = (string)reader["State"];
                                State = State.TrimEnd();
                                UnsetNull(ATWebLogger.Core.Location.Fields.State);
                            }

                        }
                        if (_concurrency != ATWebLogger.Core.Location.ConcurrencyOptions.Ignore)
                        {
                            _concurrencyArray = GetSerializedObject(this);
                        }
                    }
                }
            }
        }

        /// <summary>
        /// Retrieves the row with the matching primary key from the
        /// database and stores them in the properties.
        /// </summary>
        /// <param name="id">The primary key of the row to pull.</param>
        private void Get(int id)
        {
            Get(id, null);
        }

        /// <summary>
        /// Unsets the value of the given field to null.
        /// </summary>
        /// <param name="field">The field to unset as null.</param>
        private void UnsetNull(ATWebLogger.Core.Location.Fields field)
        {
            _nullDictionary[field] = false;
        }

        /// <summary>
        /// Sets the value of the given field to null.
        /// </summary>
        /// <param name="field">The field to set as null.</param>
        public void SetNull(ATWebLogger.Core.Location.Fields field)
        {
            _layerGenIsDirty = true;
            _nullDictionary[field] = true;
        }

        /// <summary>
        /// Determines if the given field is null or if it contains a value.
        /// </summary>
        /// <param name="field">The field to test for a null value.</param>
        /// <returns>True, if the field is null, otherwise, false.</returns>
        public bool IsNull(ATWebLogger.Core.Location.Fields field)
        {
            return _nullDictionary[field];
        }

        /// <summary>
        /// Resets all properties to their default (null) value.
        /// </summary>
        private void ResetToDefault()
        {
            _nullDictionary[ATWebLogger.Core.Location.Fields.DataType] = true;
            _nullDictionary[ATWebLogger.Core.Location.Fields.Deadband] = true;
            _nullDictionary[ATWebLogger.Core.Location.Fields.DeviceId] = true;
            _nullDictionary[ATWebLogger.Core.Location.Fields.Gain] = true;
            _nullDictionary[ATWebLogger.Core.Location.Fields.HighLevel] = true;
            _nullDictionary[ATWebLogger.Core.Location.Fields.LowLevel] = true;
            _nullDictionary[ATWebLogger.Core.Location.Fields.MemoryAddress] = true;
            _nullDictionary[ATWebLogger.Core.Location.Fields.Name] = true;
            _nullDictionary[ATWebLogger.Core.Location.Fields.Offset] = true;
            _nullDictionary[ATWebLogger.Core.Location.Fields.State] = true;

            _oldPrimaryKeyValue = _id;
        }

        /// <summary>
        /// Deletes this row from the database.
        /// </summary>
        public void Delete()
        {
            if (!_layerGenUseStoredProcedures)
            {
                string cmdString = "DELETE FROM `" + LayerGenTableName + "` WHERE `" + LayerGenPrimaryKey + "`=" + _id;

                using (MySqlConnection connection = new MySqlConnection(_connectionString))
                {
                    connection.Open();
                    using (MySqlCommand command = new MySqlCommand())
                    {
                        command.Connection = connection;
                        command.CommandType = CommandType.Text;
                        command.CommandText = cmdString;

                        command.ExecuteNonQuery();
                    }
                }
            }
            else
            {
                using (MySqlConnection connection = new MySqlConnection(_connectionString))
                {
                    connection.Open();
                    using (MySqlCommand command = new MySqlCommand())
                    {
                        command.Connection = connection;
                        command.CommandType = CommandType.StoredProcedure;
                        command.CommandText = ("spLocation_Delete").Replace("@", "");
                        command.Parameters.AddWithValue("@val1", _id);

                        command.ExecuteNonQuery();
                    }
                }
            }
            ResetToDefault();
            _layerGenIsDirty = false;
            _layerGenIsUpdate = false;
        }

        /// <summary>
        /// Saves this row to the database. It will either do an INSERT or an UPDATE
        /// depending on whether this is a new row or an existing row.
        /// </summary>
        /// <exception cref="ATWebLogger.Core.ReadOnlyException">Thrown if only partial fields have loaded. If this is a force save, then this exception will not be thrown.</exception>
        /// <exception cref="ATWebLogger.Core.OutOfSyncException">Thrown if concurrency is set to strict and the row being saved is out of sync with the row in the database.</exception>
        public void Save()
        {
            Save(false);
        }

        /// <summary>
        /// Saves this row to the database. It will either do an INSERT or an UPDATE
        /// depending on whether this is a new row or an existing row. You can specify
        /// whether or not to force save this row. If only partial fields have been
        /// loaded, force saving will force the row to save. Keep in mind though that
        /// the fields that are not loaded will be overwritten with a null value.
        /// </summary>
        /// <param name="forceSave">True, if you want to force save the row.</param>
        /// <exception cref="ATWebLogger.Core.ReadOnlyException">Thrown if only partial fields have loaded. If this is a force save, then this exception will not be thrown.</exception>
        /// <exception cref="ATWebLogger.Core.OutOfSyncException">Thrown if concurrency is set to strict and the row being saved is out of sync with the row in the database.</exception>
        public void Save(bool forceSave)
        {
            MySqlParameter parameter;

            if (!_layerGenIsDirty)
            {
                return;
            }

            if (_isReadOnly && forceSave == false)
            {
                throw new ATWebLogger.Core.ReadOnlyException(LayerGenTableName + " is in a read-only state because only partial fields have been loaded!");
            }

            if (!_layerGenIsUpdate)
            {
                if (!_layerGenUseStoredProcedures)
                {
                    string cmdString =
                        "INSERT INTO `" + LayerGenTableName + "` (" + LayerGenFieldNames + ") VALUES (" + LayerGenValueNames +
                        "); SELECT LAST_INSERT_ID();";

                    using (MySqlConnection connection = new MySqlConnection(_connectionString))
                    {
                        using (MySqlCommand command = new MySqlCommand())
                        {
                            command.Connection = connection;
                            command.CommandType = CommandType.Text;
                            command.CommandText = cmdString;
                            parameter = new MySqlParameter("@val1", MySqlDbType.VarChar);
                            if (IsNull(ATWebLogger.Core.Location.Fields.DataType))
                                parameter.Value = "";
                            else
                                parameter.Value = _dataType;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val2", MySqlDbType.Double);
                            if (IsNull(ATWebLogger.Core.Location.Fields.Deadband))
                                parameter.Value = DBNull.Value;
                            else
                                parameter.Value = _deadband;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val3", MySqlDbType.Int32);
                            if (IsNull(ATWebLogger.Core.Location.Fields.DeviceId))
                                parameter.Value = 0;
                            else
                                parameter.Value = _deviceId;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val4", MySqlDbType.Double);
                            if (IsNull(ATWebLogger.Core.Location.Fields.Gain))
                                parameter.Value = 0;
                            else
                                parameter.Value = _gain;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val5", MySqlDbType.Double);
                            if (IsNull(ATWebLogger.Core.Location.Fields.HighLevel))
                                parameter.Value = DBNull.Value;
                            else
                                parameter.Value = _highLevel;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val6", MySqlDbType.Double);
                            if (IsNull(ATWebLogger.Core.Location.Fields.LowLevel))
                                parameter.Value = DBNull.Value;
                            else
                                parameter.Value = _lowLevel;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val7", MySqlDbType.Int32);
                            if (IsNull(ATWebLogger.Core.Location.Fields.MemoryAddress))
                                parameter.Value = 0;
                            else
                                parameter.Value = _memoryAddress;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val8", MySqlDbType.VarChar);
                            if (IsNull(ATWebLogger.Core.Location.Fields.Name))
                                parameter.Value = "";
                            else
                                parameter.Value = _name;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val9", MySqlDbType.Double);
                            if (IsNull(ATWebLogger.Core.Location.Fields.Offset))
                                parameter.Value = 0;
                            else
                                parameter.Value = _offset;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val10", MySqlDbType.VarChar);
                            if (IsNull(ATWebLogger.Core.Location.Fields.State))
                                parameter.Value = "";
                            else
                                parameter.Value = _state;
                            command.Parameters.Add(parameter);

                            connection.Open();
                            object obj = command.ExecuteScalar();

                            _id = (int)(ulong)obj;

                            _oldPrimaryKeyValue = _id;
                            _layerGenIsUpdate = true;
                            _layerGenIsDirty = false;
                            if (_concurrency != ATWebLogger.Core.Location.ConcurrencyOptions.Ignore)
                            {
                                _concurrencyArray = GetSerializedObject(this);
                            }
                        }
                    }
                }
                else
                {
                    using (MySqlConnection connection = new MySqlConnection(_connectionString))
                    {
                        using (MySqlCommand command = new MySqlCommand())
                        {
                            command.Connection = connection;
                            command.CommandType = CommandType.StoredProcedure;
                            command.CommandText = ("spLocation_Insert").Replace("@", "");
                            parameter = new MySqlParameter("@val1", MySqlDbType.VarChar);
                            if (IsNull(ATWebLogger.Core.Location.Fields.DataType))
                                parameter.Value = "";
                            else
                                parameter.Value = _dataType;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val2", MySqlDbType.Double);
                            if (IsNull(ATWebLogger.Core.Location.Fields.Deadband))
                                parameter.Value = DBNull.Value;
                            else
                                parameter.Value = _deadband;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val3", MySqlDbType.Int32);
                            if (IsNull(ATWebLogger.Core.Location.Fields.DeviceId))
                                parameter.Value = 0;
                            else
                                parameter.Value = _deviceId;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val4", MySqlDbType.Double);
                            if (IsNull(ATWebLogger.Core.Location.Fields.Gain))
                                parameter.Value = 0;
                            else
                                parameter.Value = _gain;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val5", MySqlDbType.Double);
                            if (IsNull(ATWebLogger.Core.Location.Fields.HighLevel))
                                parameter.Value = DBNull.Value;
                            else
                                parameter.Value = _highLevel;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val6", MySqlDbType.Double);
                            if (IsNull(ATWebLogger.Core.Location.Fields.LowLevel))
                                parameter.Value = DBNull.Value;
                            else
                                parameter.Value = _lowLevel;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val7", MySqlDbType.Int32);
                            if (IsNull(ATWebLogger.Core.Location.Fields.MemoryAddress))
                                parameter.Value = 0;
                            else
                                parameter.Value = _memoryAddress;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val8", MySqlDbType.VarChar);
                            if (IsNull(ATWebLogger.Core.Location.Fields.Name))
                                parameter.Value = "";
                            else
                                parameter.Value = _name;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val9", MySqlDbType.Double);
                            if (IsNull(ATWebLogger.Core.Location.Fields.Offset))
                                parameter.Value = 0;
                            else
                                parameter.Value = _offset;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val10", MySqlDbType.VarChar);
                            if (IsNull(ATWebLogger.Core.Location.Fields.State))
                                parameter.Value = "";
                            else
                                parameter.Value = _state;
                            command.Parameters.Add(parameter);

                            connection.Open();
                            object obj = command.ExecuteScalar();

                            _id = (int)(ulong)obj;

                            _oldPrimaryKeyValue = _id;
                            _layerGenIsUpdate = true;
                            _layerGenIsDirty = false;
                            if (_concurrency != ATWebLogger.Core.Location.ConcurrencyOptions.Ignore)
                            {
                                _concurrencyArray = GetSerializedObject(this);
                            }
                        }
                    }
                }
            }
            else
            {
                if (!_layerGenUseStoredProcedures)
                {
                    string cmdString = "UPDATE `" + LayerGenTableName + "` SET `DataType`=@val1,`Deadband`=@val2,`DeviceId`=@val3,`Gain`=@val4,`HighLevel`=@val5,`LowLevel`=@val6,`MemoryAddress`=@val7,`Name`=@val8,`Offset`=@val9,`State`=@val10 WHERE " + LayerGenPrimaryKey + "=@val11";

                    using (MySqlConnection connection = new MySqlConnection(_connectionString))
                    {
                        using (MySqlCommand command = new MySqlCommand())
                        {
                            command.Connection = connection;
                            command.CommandType = CommandType.Text;
                            command.CommandText = cmdString;
                            parameter = new MySqlParameter("@val1", MySqlDbType.VarChar);
                            if (IsNull(ATWebLogger.Core.Location.Fields.DataType))
                                parameter.Value = "";
                            else
                                parameter.Value = _dataType;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val2", MySqlDbType.Double);
                            if (IsNull(ATWebLogger.Core.Location.Fields.Deadband))
                                parameter.Value = DBNull.Value;
                            else
                                parameter.Value = _deadband;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val3", MySqlDbType.Int32);
                            if (IsNull(ATWebLogger.Core.Location.Fields.DeviceId))
                                parameter.Value = 0;
                            else
                                parameter.Value = _deviceId;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val4", MySqlDbType.Double);
                            if (IsNull(ATWebLogger.Core.Location.Fields.Gain))
                                parameter.Value = 0;
                            else
                                parameter.Value = _gain;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val5", MySqlDbType.Double);
                            if (IsNull(ATWebLogger.Core.Location.Fields.HighLevel))
                                parameter.Value = DBNull.Value;
                            else
                                parameter.Value = _highLevel;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val6", MySqlDbType.Double);
                            if (IsNull(ATWebLogger.Core.Location.Fields.LowLevel))
                                parameter.Value = DBNull.Value;
                            else
                                parameter.Value = _lowLevel;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val7", MySqlDbType.Int32);
                            if (IsNull(ATWebLogger.Core.Location.Fields.MemoryAddress))
                                parameter.Value = 0;
                            else
                                parameter.Value = _memoryAddress;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val8", MySqlDbType.VarChar);
                            if (IsNull(ATWebLogger.Core.Location.Fields.Name))
                                parameter.Value = "";
                            else
                                parameter.Value = _name;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val9", MySqlDbType.Double);
                            if (IsNull(ATWebLogger.Core.Location.Fields.Offset))
                                parameter.Value = 0;
                            else
                                parameter.Value = _offset;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val10", MySqlDbType.VarChar);
                            if (IsNull(ATWebLogger.Core.Location.Fields.State))
                                parameter.Value = "";
                            else
                                parameter.Value = _state;
                            command.Parameters.Add(parameter);

                            command.Parameters.AddWithValue("@val11", _oldPrimaryKeyValue);

                            if (_concurrency != ATWebLogger.Core.Location.ConcurrencyOptions.Ignore)
                            {
                                if (!IsDataEqual())
                                {
                                    throw new ATWebLogger.Core.OutOfSyncException(LayerGenTableName + ": Row is out of sync with database! Changes not written to database!");
                                }
                            }

                            connection.Open();
                            command.ExecuteNonQuery();
                            _oldPrimaryKeyValue = _id;
                            _layerGenIsUpdate = true;
                            _layerGenIsDirty = false;
                            if (_concurrency != ATWebLogger.Core.Location.ConcurrencyOptions.Ignore)
                            {
                                _concurrencyArray = GetSerializedObject(this);
                            }
                        }
                    }
                }
                else
                {
                    using (MySqlConnection connection = new MySqlConnection(_connectionString))
                    {
                        using (MySqlCommand command = new MySqlCommand())
                        {
                            command.Connection = connection;
                            command.CommandType = CommandType.StoredProcedure;
                            command.CommandText = ("spLocation_Update").Replace("@", "");
                            parameter = new MySqlParameter("@val1", MySqlDbType.VarChar);
                            if (IsNull(ATWebLogger.Core.Location.Fields.DataType))
                                parameter.Value = "";
                            else
                                parameter.Value = _dataType;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val2", MySqlDbType.Double);
                            if (IsNull(ATWebLogger.Core.Location.Fields.Deadband))
                                parameter.Value = DBNull.Value;
                            else
                                parameter.Value = _deadband;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val3", MySqlDbType.Int32);
                            if (IsNull(ATWebLogger.Core.Location.Fields.DeviceId))
                                parameter.Value = 0;
                            else
                                parameter.Value = _deviceId;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val4", MySqlDbType.Double);
                            if (IsNull(ATWebLogger.Core.Location.Fields.Gain))
                                parameter.Value = 0;
                            else
                                parameter.Value = _gain;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val5", MySqlDbType.Double);
                            if (IsNull(ATWebLogger.Core.Location.Fields.HighLevel))
                                parameter.Value = DBNull.Value;
                            else
                                parameter.Value = _highLevel;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val6", MySqlDbType.Double);
                            if (IsNull(ATWebLogger.Core.Location.Fields.LowLevel))
                                parameter.Value = DBNull.Value;
                            else
                                parameter.Value = _lowLevel;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val7", MySqlDbType.Int32);
                            if (IsNull(ATWebLogger.Core.Location.Fields.MemoryAddress))
                                parameter.Value = 0;
                            else
                                parameter.Value = _memoryAddress;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val8", MySqlDbType.VarChar);
                            if (IsNull(ATWebLogger.Core.Location.Fields.Name))
                                parameter.Value = "";
                            else
                                parameter.Value = _name;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val9", MySqlDbType.Double);
                            if (IsNull(ATWebLogger.Core.Location.Fields.Offset))
                                parameter.Value = 0;
                            else
                                parameter.Value = _offset;
                            command.Parameters.Add(parameter);
                            parameter = new MySqlParameter("@val10", MySqlDbType.VarChar);
                            if (IsNull(ATWebLogger.Core.Location.Fields.State))
                                parameter.Value = "";
                            else
                                parameter.Value = _state;
                            command.Parameters.Add(parameter);

                            command.Parameters.AddWithValue("@val11", _oldPrimaryKeyValue);

                            if (_concurrency != ATWebLogger.Core.Location.ConcurrencyOptions.Ignore)
                            {
                                if (!IsDataEqual())
                                {
                                    throw new ATWebLogger.Core.OutOfSyncException(LayerGenTableName + ": Row is out of sync with database! Changes not written to database!");
                                }
                            }

                            connection.Open();
                            command.ExecuteNonQuery();
                            _oldPrimaryKeyValue = _id;
                            _layerGenIsUpdate = true;
                            _layerGenIsDirty = false;
                            if (_concurrency != ATWebLogger.Core.Location.ConcurrencyOptions.Ignore)
                            {
                                _concurrencyArray = GetSerializedObject(this);
                            }
                        }
                    }
                }
            }
        }



        /// <summary>
        /// Retrieves all rows and all fields from the Location table.
        /// </summary>
        /// <returns>A <see cref="System.Data.DataTable" /> with all the data.</returns>
        internal static DataTable GetAll(bool useStoredProcedures)
        {
            if (!useStoredProcedures)
            {
                return GetBySqlStatement("SELECT * FROM `" + LayerGenTableName + "`");
            }

            using (MySqlConnection connection = new MySqlConnection(Universal.GetConnectionString()))
            {
                using (MySqlCommand command = new MySqlCommand())
                {
                    connection.Open();
                    command.CommandType = CommandType.StoredProcedure;
                    command.CommandText = ("spLocation_GetAll").Replace("@", "");
                    command.Connection = connection;

                    using (MySqlDataAdapter adapter = new MySqlDataAdapter())
                    {
                        using (DataSet ds = new DataSet())
                        {
                            adapter.SelectCommand = command;
                            adapter.Fill(ds);

                            if (ds.Tables.Count > 0)
                            {
                                return ds.Tables[0];
                            }
                        }
                    }
                }
            }
            return null;
        }

        /// <summary>
        /// Retrieves all rows and all fields from the Location table.
        /// </summary>
        /// <param name="connectionString">Sets the connection string to use to connect to the database</param>
        /// <returns>A <see cref="System.Data.DataTable" /> with all the data.</returns>
        internal static DataTable GetAll(ATWebLogger.Core.LayerGenConnectionString connectionString, bool useStoredProcedures)
        {
            if (!useStoredProcedures)
            {
                return GetBySqlStatement(connectionString, "SELECT * FROM `" + LayerGenTableName + "`");
            }

            using (MySqlConnection connection = new MySqlConnection(connectionString.ConnectionString))
            {
                using (MySqlCommand command = new MySqlCommand())
                {
                    connection.Open();
                    command.CommandType = CommandType.StoredProcedure;
                    command.CommandText = ("spLocation_GetAll").Replace("@", "");
                    command.Connection = connection;

                    using (MySqlDataAdapter adapter = new MySqlDataAdapter())
                    {
                        using (DataSet ds = new DataSet())
                        {
                            adapter.SelectCommand = command;
                            adapter.Fill(ds);

                            if (ds.Tables.Count > 0)
                            {
                                return ds.Tables[0];
                            }
                        }
                    }
                }
            }
            return null;
        }

        /// <summary>
        /// Retrieves rows from the Location table by executing the given stored procedure.
        /// </summary>
        /// <param name="procedureName">The name of the stored procedure to execute.</param>
        /// <param name="procedureParams">A dictionary of parameter/value pairs. This can be null if there are no parameters.</param>
        /// <returns>A <see cref="System.Data.DataTable" /> with all the data.</returns>
        internal static DataTable GetByStoredProcedure(string procedureName, Dictionary<string, object> procedureParams)
        {
            using (MySqlConnection connection = new MySqlConnection(Universal.GetConnectionString()))
            {
                using (MySqlCommand command = new MySqlCommand())
                {
                    command.Connection = connection;
                    command.CommandType = CommandType.StoredProcedure;
                    command.CommandText = procedureName;
                    if (procedureParams != null && procedureParams.Count > 0)
                    {
                        foreach (KeyValuePair<string, object> kvp in procedureParams)
                        {
                            command.Parameters.AddWithValue(kvp.Key, kvp.Value);
                        }
                    }

                    connection.Open();
                    using (MySqlDataAdapter adapter = new MySqlDataAdapter())
                    {
                        using (DataSet ds = new DataSet())
                        {
                            adapter.SelectCommand = command;
                            adapter.Fill(ds);

                            if (ds.Tables.Count > 0)
                            {
                                return ds.Tables[0];
                            }
                        }
                    }
                }
            }

            return null;
        }

        /// <summary>
        /// Retrieves rows from the Location table by executing the given stored procedure.
        /// </summary>
        /// <param name="connectionString">Sets the connection string to use to connect to the database</param>
        /// <param name="procedureName">The name of the stored procedure to execute.</param>
        /// <param name="procedureParams">A dictionary of parameter/value pairs. This can be null if there are no parameters.</param>
        /// <returns>A <see cref="System.Data.DataTable" /> with all the data.</returns>
        internal static DataTable GetByStoredProcedure(ATWebLogger.Core.LayerGenConnectionString connectionString, string procedureName, Dictionary<string, object> procedureParams)
        {
            using (MySqlConnection connection = new MySqlConnection(connectionString.ConnectionString))
            {
                using (MySqlCommand command = new MySqlCommand())
                {
                    command.Connection = connection;
                    command.CommandType = CommandType.StoredProcedure;
                    command.CommandText = procedureName;
                    if (procedureParams != null && procedureParams.Count > 0)
                    {
                        foreach (KeyValuePair<string, object> kvp in procedureParams)
                        {
                            command.Parameters.AddWithValue(kvp.Key, kvp.Value);
                        }
                    }

                    connection.Open();
                    using (MySqlDataAdapter adapter = new MySqlDataAdapter())
                    {
                        using (DataSet ds = new DataSet())
                        {
                            adapter.SelectCommand = command;
                            adapter.Fill(ds);

                            if (ds.Tables.Count > 0)
                            {
                                return ds.Tables[0];
                            }
                        }
                    }
                }
            }

            return null;
        }

        /// <summary>
        /// Retrieves rows from the Location table, based on the given SQL statement.
        /// </summary>
        /// <param name="sql">The SQL statement to execute.</param>
        /// <param name="sqlParams">Optional <see cref="System.String.Format"/> like parameters</param>
        /// <returns>A <see cref="System.Data.DataTable" /> with all the data.</returns>
        internal static DataTable GetBySqlStatement(string sql, params object[] sqlParams)
        {
            int paramNdx = 0;
            int valNdx = 1;
            Dictionary<string, string> paramValDictionary = new Dictionary<string, string>();

            foreach (object param in sqlParams)
            {
                if (param is string)
                {
                    sql = sql.Replace("'{" + paramNdx + "}'", "@val" + valNdx);
                    sql = sql.Replace("{" + paramNdx + "}", "@val" + valNdx);
                    paramValDictionary.Add("@val" + valNdx, (string)param);
                    valNdx++;
                }
                else
                {
                    sql = sql.Replace("{" + paramNdx + "}", param.ToString());
                }
                paramNdx++;
            }

            using (MySqlConnection connection = new MySqlConnection(Universal.GetConnectionString()))
            {
                using (MySqlCommand command = new MySqlCommand())
                {
                    command.Connection = connection;
                    command.CommandType = CommandType.Text;
                    command.CommandText = sql;

                    foreach (KeyValuePair<string, string> kvp in paramValDictionary)
                    {
                        command.Parameters.AddWithValue(kvp.Key, kvp.Value);
                    }

                    connection.Open();
                    using (MySqlDataAdapter adapter = new MySqlDataAdapter())
                    {
                        using (DataSet ds = new DataSet())
                        {
                            adapter.SelectCommand = command;
                            adapter.Fill(ds);

                            if (ds.Tables.Count > 0)
                            {
                                return ds.Tables[0];
                            }
                        }
                    }
                }
            }

            return null;
        }

        /// <summary>
        /// Retrieves rows from the Location table, based on the given SQL statement.
        /// </summary>
        /// <param name="connectionString">Sets the connection string to use to connect to the database</param>
        /// <param name="sql">The SQL statement to execute.</param>
        /// <param name="sqlParams">Optional <see cref="System.String.Format"/> like parameters</param>
        /// <returns>A <see cref="System.Data.DataTable" /> with all the data.</returns>
        internal static DataTable GetBySqlStatement(ATWebLogger.Core.LayerGenConnectionString connectionString, string sql, params object[] sqlParams)
        {
            int paramNdx = 0;
            int valNdx = 1;
            Dictionary<string, string> paramValDictionary = new Dictionary<string, string>();

            foreach (object param in sqlParams)
            {
                if (param is string)
                {
                    sql = sql.Replace("'{" + paramNdx + "}'", "@val" + valNdx);
                    sql = sql.Replace("{" + paramNdx + "}", "@val" + valNdx);
                    paramValDictionary.Add("@val" + valNdx, (string)param);
                    valNdx++;
                }
                else
                {
                    sql = sql.Replace("{" + paramNdx + "}", param.ToString());
                }
                paramNdx++;
            }

            using (MySqlConnection connection = new MySqlConnection(connectionString.ConnectionString))
            {
                using (MySqlCommand command = new MySqlCommand())
                {
                    command.Connection = connection;
                    command.CommandType = CommandType.Text;
                    command.CommandText = sql;

                    foreach (KeyValuePair<string, string> kvp in paramValDictionary)
                    {
                        command.Parameters.AddWithValue(kvp.Key, kvp.Value);
                    }

                    connection.Open();
                    using (MySqlDataAdapter adapter = new MySqlDataAdapter())
                    {
                        using (DataSet ds = new DataSet())
                        {
                            adapter.SelectCommand = command;
                            adapter.Fill(ds);

                            if (ds.Tables.Count > 0)
                            {
                                return ds.Tables[0];
                            }
                        }
                    }
                }
            }

            return null;
        }

        private byte[] GetSerializedObject(LocationBase cls)
        {
            byte[] clsid = ObjectToByteArray(cls.Id);
            byte[] clsdataType = ObjectToByteArray(cls.DataType);
            byte[] clsdeadband = ObjectToByteArray(cls.Deadband);
            byte[] clsdeviceId = ObjectToByteArray(cls.DeviceId);
            byte[] clsgain = ObjectToByteArray(cls.Gain);
            byte[] clshighLevel = ObjectToByteArray(cls.HighLevel);
            byte[] clslowLevel = ObjectToByteArray(cls.LowLevel);
            byte[] clsmemoryAddress = ObjectToByteArray(cls.MemoryAddress);
            byte[] clsname = ObjectToByteArray(cls.Name);
            byte[] clsoffset = ObjectToByteArray(cls.Offset);
            byte[] clsstate = ObjectToByteArray(cls.State);

            byte[] clsArray = new byte[clsid.Length + clsdataType.Length + clsdeadband.Length + clsdeviceId.Length + clsgain.Length + clshighLevel.Length +
                       clslowLevel.Length + clsmemoryAddress.Length + clsname.Length + clsoffset.Length + clsstate.Length];
            Array.Copy(clsid, 0, clsArray, 0, clsid.Length);
            Array.Copy(clsdataType, 0, clsArray, 0 + clsid.Length, clsdataType.Length);
            Array.Copy(clsdeadband, 0, clsArray, 0 + clsid.Length + clsdataType.Length, clsdeadband.Length);
            Array.Copy(clsdeviceId, 0, clsArray, 0 + clsid.Length + clsdataType.Length + clsdeadband.Length, clsdeviceId.Length);
            Array.Copy(clsgain, 0, clsArray, 0 + clsid.Length + clsdataType.Length + clsdeadband.Length + clsdeviceId.Length, clsgain.Length);
            Array.Copy(clshighLevel, 0, clsArray, 0 + clsid.Length + clsdataType.Length + clsdeadband.Length + clsdeviceId.Length + clsgain.Length
                        , clshighLevel.Length);
            Array.Copy(clslowLevel, 0, clsArray, 0 + clsid.Length + clsdataType.Length + clsdeadband.Length + clsdeviceId.Length + clsgain.Length
                         + clshighLevel.Length, clslowLevel.Length);
            Array.Copy(clsmemoryAddress, 0, clsArray, 0 + clsid.Length + clsdataType.Length + clsdeadband.Length + clsdeviceId.Length + clsgain.Length
                         + clshighLevel.Length + clslowLevel.Length, clsmemoryAddress.Length);
            Array.Copy(clsname, 0, clsArray, 0 + clsid.Length + clsdataType.Length + clsdeadband.Length + clsdeviceId.Length + clsgain.Length
                         + clshighLevel.Length + clslowLevel.Length + clsmemoryAddress.Length
                        , clsname.Length);
            Array.Copy(clsoffset, 0, clsArray, 0 + clsid.Length + clsdataType.Length + clsdeadband.Length + clsdeviceId.Length + clsgain.Length
                         + clshighLevel.Length + clslowLevel.Length + clsmemoryAddress.Length
                         + clsname.Length, clsoffset.Length);
            Array.Copy(clsstate, 0, clsArray, 0 + clsid.Length + clsdataType.Length + clsdeadband.Length + clsdeviceId.Length + clsgain.Length
                         + clshighLevel.Length + clslowLevel.Length + clsmemoryAddress.Length
                         + clsname.Length + clsoffset.Length, clsstate.Length);

            return clsArray;

        }

        /// <summary>
        /// Determines of the current concurrency array is equal to what's in the database.
        /// </summary>
        /// <returns>True, if the data in memory is equal to whats in the database, otherwise false.</returns>
        protected bool IsDataEqual()
        {
            ATWebLogger.Core.Location obj = new ATWebLogger.Core.Location(Id);
            byte[] myArray = _concurrencyArray;
            byte[] clsArray = GetSerializedObject(obj);

            if (myArray.Length != clsArray.Length)
            {
                return false;
            }

            for (int i = 0; i < myArray.Length; i++)
            {
                if (myArray[i] != clsArray[i])
                {
                    return false;
                }
            }
            return true;
        }

        private byte[] ObjectToByteArray(object obj)
        {
            if (obj == null)
                return new byte[] { };

            if (obj is MySqlGeometry)
            {
                MySqlGeometry obj2 = (MySqlGeometry)obj;
                SimpleGeometry sg = new SimpleGeometry();
                sg.X = obj2.XCoordinate;
                sg.Y = obj2.YCoordinate;
                sg.Srid = obj2.SRID;
                sg.Value = obj2.Value;
                obj = sg;
            }

            BinaryFormatter bf = new BinaryFormatter();
            using (MemoryStream ms = new MemoryStream())
            {
                bf.Serialize(ms, obj);
                return ms.ToArray();
            }
        }

        [Serializable]
        private class SimpleGeometry
        {
            private double? _x;
            private double? _y;
            private byte[] _value;
            private int? _srid;

            public double? X
            {
                get { return _x; }
                set { _x = value; }
            }
            public double? Y
            {
                get { return _y; }
                set { _y = value; }
            }
            public byte[] Value
            {
                get { return _value; }
                set { _value = value; }
            }
            public int? Srid
            {
                get { return _srid; }
                set { _srid = value; }
            }
        }

        /// <summary>
        /// Converts an instance of an object to a string format
        /// </summary>
        /// <param name="format">Specifies if it should convert to XML, BSON or JSON</param>
        /// <returns>The object, converted to a string representation</returns>
        public string ToString(ATWebLogger.Core.SerializationFormats format)
        {
            SerializableLocation serializableLocation = new SerializableLocation();
            serializableLocation.Id = IsNull(ATWebLogger.Core.Location.Fields.Id)
                ? (int?)null : _id;
            serializableLocation.DataType = IsNull(ATWebLogger.Core.Location.Fields.DataType)
                ? null : _dataType;
            serializableLocation.Deadband = IsNull(ATWebLogger.Core.Location.Fields.Deadband)
                ? (double?)null : _deadband;
            serializableLocation.DeviceId = IsNull(ATWebLogger.Core.Location.Fields.DeviceId)
                ? (int?)null : _deviceId;
            serializableLocation.Gain = IsNull(ATWebLogger.Core.Location.Fields.Gain)
                ? (double?)null : _gain;
            serializableLocation.HighLevel = IsNull(ATWebLogger.Core.Location.Fields.HighLevel)
                ? (double?)null : _highLevel;
            serializableLocation.LowLevel = IsNull(ATWebLogger.Core.Location.Fields.LowLevel)
                ? (double?)null : _lowLevel;
            serializableLocation.MemoryAddress = IsNull(ATWebLogger.Core.Location.Fields.MemoryAddress)
                ? (int?)null : _memoryAddress;
            serializableLocation.Name = IsNull(ATWebLogger.Core.Location.Fields.Name)
                ? null : _name;
            serializableLocation.Offset = IsNull(ATWebLogger.Core.Location.Fields.Offset)
                ? (double?)null : _offset;
            serializableLocation.State = IsNull(ATWebLogger.Core.Location.Fields.State)
                ? null : _state;
            serializableLocation.SerializationIsUpdate = _layerGenIsUpdate;

            if (format == ATWebLogger.Core.SerializationFormats.Json)
            {
                return Newtonsoft.Json.JsonConvert.SerializeObject(serializableLocation);
            }

            if (format == ATWebLogger.Core.SerializationFormats.Xml)
            {
                System.Xml.Serialization.XmlSerializer xType = new System.Xml.Serialization.XmlSerializer(serializableLocation.GetType());

                using (StringWriter sw = new StringWriter())
                {
                    xType.Serialize(sw, serializableLocation);

                    return sw.ToString();
                }
            }

            if (format == ATWebLogger.Core.SerializationFormats.BsonBase64)
            {
                using (System.IO.MemoryStream ms = new System.IO.MemoryStream())
                {
                    using (Newtonsoft.Json.Bson.BsonWriter writer = new Newtonsoft.Json.Bson.BsonWriter(ms))
                    {
                        Newtonsoft.Json.JsonSerializer serializer = new Newtonsoft.Json.JsonSerializer();
                        serializer.Serialize(writer, serializableLocation);
                    }
                    return Convert.ToBase64String(ms.ToArray());
                }
            }

            return "";
        }


        protected static ATWebLogger.Core.Location BsonToLocation(string bson)
        {
            SerializableLocation z;
            byte[] data = Convert.FromBase64String(bson);
            using (System.IO.MemoryStream ms = new System.IO.MemoryStream(data))
            {
                using (Newtonsoft.Json.Bson.BsonReader reader = new Newtonsoft.Json.Bson.BsonReader(ms))
                {
                    Newtonsoft.Json.JsonSerializer serializer = new Newtonsoft.Json.JsonSerializer();
                    z = serializer.Deserialize<SerializableLocation>(reader);
                }
            }

            ATWebLogger.Core.Location tmp = new ATWebLogger.Core.Location();

            if (z.DataType == null)
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.DataType);
            }
            else
            {
                tmp._dataType = z.DataType;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.DataType);
            }
            if (z.Deadband.HasValue)
            {
                tmp._deadband = z.Deadband.Value;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.Deadband);
            }
            else
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.Deadband);
            }
            if (z.DeviceId.HasValue)
            {
                tmp._deviceId = z.DeviceId.Value;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.DeviceId);
            }
            else
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.DeviceId);
            }
            if (z.Gain.HasValue)
            {
                tmp._gain = z.Gain.Value;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.Gain);
            }
            else
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.Gain);
            }
            if (z.HighLevel.HasValue)
            {
                tmp._highLevel = z.HighLevel.Value;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.HighLevel);
            }
            else
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.HighLevel);
            }
            if (z.Id.HasValue)
            {
                tmp._id = z.Id.Value;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.Id);
            }
            else
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.Id);
            }
            if (z.LowLevel.HasValue)
            {
                tmp._lowLevel = z.LowLevel.Value;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.LowLevel);
            }
            else
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.LowLevel);
            }
            if (z.MemoryAddress.HasValue)
            {
                tmp._memoryAddress = z.MemoryAddress.Value;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.MemoryAddress);
            }
            else
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.MemoryAddress);
            }
            if (z.Name == null)
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.Name);
            }
            else
            {
                tmp._name = z.Name;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.Name);
            }
            if (z.Offset.HasValue)
            {
                tmp._offset = z.Offset.Value;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.Offset);
            }
            else
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.Offset);
            }
            if (z.State == null)
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.State);
            }
            else
            {
                tmp._state = z.State;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.State);
            }

            ATWebLogger.Core.Encryption64 decryptor = new ATWebLogger.Core.Encryption64();
            tmp._connectionString = decryptor.Decrypt(z.SerializationConnectionString, Universal.LayerGenEncryptionKey);
            tmp._layerGenIsUpdate = z.SerializationIsUpdate;
            tmp._layerGenIsDirty = true;
            return tmp;
        }

        protected static ATWebLogger.Core.Location XmlToLocation(string xml)
        {
            System.Xml.Serialization.XmlSerializer xType = new System.Xml.Serialization.XmlSerializer(typeof(SerializableLocation));
            SerializableLocation z;

            using (StringReader sr = new StringReader(xml))
            {
                z = (SerializableLocation)xType.Deserialize(sr);
            }

            ATWebLogger.Core.Location tmp = new ATWebLogger.Core.Location();

            if (z.DataType == null)
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.DataType);
            }
            else
            {
                tmp._dataType = z.DataType;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.DataType);
            }
            if (z.Deadband.HasValue)
            {
                tmp._deadband = z.Deadband.Value;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.Deadband);
            }
            else
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.Deadband);
            }
            if (z.DeviceId.HasValue)
            {
                tmp._deviceId = z.DeviceId.Value;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.DeviceId);
            }
            else
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.DeviceId);
            }
            if (z.Gain.HasValue)
            {
                tmp._gain = z.Gain.Value;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.Gain);
            }
            else
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.Gain);
            }
            if (z.HighLevel.HasValue)
            {
                tmp._highLevel = z.HighLevel.Value;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.HighLevel);
            }
            else
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.HighLevel);
            }
            if (z.Id.HasValue)
            {
                tmp._id = z.Id.Value;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.Id);
            }
            else
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.Id);
            }
            if (z.LowLevel.HasValue)
            {
                tmp._lowLevel = z.LowLevel.Value;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.LowLevel);
            }
            else
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.LowLevel);
            }
            if (z.MemoryAddress.HasValue)
            {
                tmp._memoryAddress = z.MemoryAddress.Value;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.MemoryAddress);
            }
            else
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.MemoryAddress);
            }
            if (z.Name == null)
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.Name);
            }
            else
            {
                tmp._name = z.Name;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.Name);
            }
            if (z.Offset.HasValue)
            {
                tmp._offset = z.Offset.Value;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.Offset);
            }
            else
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.Offset);
            }
            if (z.State == null)
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.State);
            }
            else
            {
                tmp._state = z.State;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.State);
            }

            ATWebLogger.Core.Encryption64 decryptor = new ATWebLogger.Core.Encryption64();
            tmp._connectionString = decryptor.Decrypt(z.SerializationConnectionString, Universal.LayerGenEncryptionKey);
            tmp._layerGenIsUpdate = z.SerializationIsUpdate;
            tmp._layerGenIsDirty = true;
            return tmp;
        }

        protected static ATWebLogger.Core.Location JsonToLocation(string json)
        {
            SerializableLocation z = Newtonsoft.Json.JsonConvert.DeserializeObject<SerializableLocation>(json);

            ATWebLogger.Core.Location tmp = new ATWebLogger.Core.Location();

            if (z.DataType == null)
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.DataType);
            }
            else
            {
                tmp._dataType = z.DataType;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.DataType);
            }
            if (z.Deadband.HasValue)
            {
                tmp._deadband = z.Deadband.Value;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.Deadband);
            }
            else
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.Deadband);
            }
            if (z.DeviceId.HasValue)
            {
                tmp._deviceId = z.DeviceId.Value;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.DeviceId);
            }
            else
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.DeviceId);
            }
            if (z.Gain.HasValue)
            {
                tmp._gain = z.Gain.Value;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.Gain);
            }
            else
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.Gain);
            }
            if (z.HighLevel.HasValue)
            {
                tmp._highLevel = z.HighLevel.Value;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.HighLevel);
            }
            else
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.HighLevel);
            }
            if (z.Id.HasValue)
            {
                tmp._id = z.Id.Value;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.Id);
            }
            else
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.Id);
            }
            if (z.LowLevel.HasValue)
            {
                tmp._lowLevel = z.LowLevel.Value;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.LowLevel);
            }
            else
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.LowLevel);
            }
            if (z.MemoryAddress.HasValue)
            {
                tmp._memoryAddress = z.MemoryAddress.Value;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.MemoryAddress);
            }
            else
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.MemoryAddress);
            }
            if (z.Name == null)
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.Name);
            }
            else
            {
                tmp._name = z.Name;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.Name);
            }
            if (z.Offset.HasValue)
            {
                tmp._offset = z.Offset.Value;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.Offset);
            }
            else
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.Offset);
            }
            if (z.State == null)
            {
                tmp.SetNull(ATWebLogger.Core.Location.Fields.State);
            }
            else
            {
                tmp._state = z.State;
                tmp.UnsetNull(ATWebLogger.Core.Location.Fields.State);
            }

            ATWebLogger.Core.Encryption64 decryptor = new ATWebLogger.Core.Encryption64();
            tmp._connectionString = decryptor.Decrypt(z.SerializationConnectionString, Universal.LayerGenEncryptionKey);
            tmp._layerGenIsUpdate = z.SerializationIsUpdate;
            tmp._layerGenIsDirty = true;
            return tmp;
        }

        [Serializable]
        public class SerializableLocation
        {
            private string _dataType;
            private double? _deadband;
            private int? _deviceId;
            private double? _gain;
            private double? _highLevel;
            private int? _id;
            private double? _lowLevel;
            private int? _memoryAddress;
            private string _name;
            private double? _offset;
            private string _state;
            private bool _serializationIsUpdate;
            private string _serializationConnectionString;

            public int? Id
            {
                get { return _id; }
                set { _id = value; }
            }
            public string DataType
            {
                get { return _dataType; }
                set { _dataType = value; }
            }
            public double? Deadband
            {
                get { return _deadband; }
                set { _deadband = value; }
            }
            public int? DeviceId
            {
                get { return _deviceId; }
                set { _deviceId = value; }
            }
            public double? Gain
            {
                get { return _gain; }
                set { _gain = value; }
            }
            public double? HighLevel
            {
                get { return _highLevel; }
                set { _highLevel = value; }
            }
            public double? LowLevel
            {
                get { return _lowLevel; }
                set { _lowLevel = value; }
            }
            public int? MemoryAddress
            {
                get { return _memoryAddress; }
                set { _memoryAddress = value; }
            }
            public string Name
            {
                get { return _name; }
                set { _name = value; }
            }
            public double? Offset
            {
                get { return _offset; }
                set { _offset = value; }
            }
            public string State
            {
                get { return _state; }
                set { _state = value; }
            }
            /// <summary>
            /// Set this to true if <see cref="Save()"></see> should do an update.
            /// Otherwise, set to false to force <see cref="Save()"></see> to do an insert.
            /// </summary>
            public bool SerializationIsUpdate
            {
                get { return _serializationIsUpdate; }
                set { _serializationIsUpdate = value; }
            }

            /// <summary>
            /// The connection string used to connect to the database.
            /// </summary>
            public string SerializationConnectionString
            {
                get { return _serializationConnectionString; }
                set { _serializationConnectionString = value; }
            }
        }

    }
}



